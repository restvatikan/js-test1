<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="css/main.css">


    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous">
    </script>
    <script
        src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
        crossorigin="anonymous">
    </script>


</head>
<body>

    <div class="black-bg" id="modal">
        <div class="white-bg" id="modal-window">
            <h4>로그인하세요</h4>

            <form action="success.html">
                <div class="my-3">
                    <input type="text" class="form-control" id="email" placeholder="Email">
                </div>
                <div class="my-3">
                    <input type="password" class="form-control" id="password" placeholder="password">
                </div>
                <button type="submit" class="btn btn-primary" id="send">전송</button>
                <button type="button" class="btn btn-danger" id="close">닫기</button>
            </form>
        </div>
    </div>

    <script>

        document.getElementsByTagName('form')[0].addEventListener('submit', function(e) {
            let email = document.getElementById('email').value;
            let pw = document.getElementById('password').value;
            if (email === '') {
                e.preventDefault();
                alert('Email 주소를 기입하세요');
            } else if (!/\S+@\S+\.\S+/.test(email)) {
                alert('유효하지 않은 이메일 형식');
                e.preventDefault();
            } else if (pw === '') {
                e.preventDefault();
                alert('비밀번호를 기입하세요');
            } else if (pw.length < 6) {
                e.preventDefault();
                alert('비밀번호는 6자리 이상이어야 합니다!');
            } else if (!/[A-Z]/.test(pw)) {
                e.preventDefault();
                alert('비밀번호에는 영어 대문자가 포함되어야 합니다!');
            }
        })

    </script>

    <nav class="navbar navbar-light bg-light" id="navbar">
        <div class="container-fluid">
            <span class="navbar-brand">JSshop</span>
            <span style="flex-grow: 10"></span>
            <span class="badge bg-dark" id="dark-btn">Dark 🔄</span>
            <span style="flex-grow: 1"></span>
            <button class="navbar-toggler" type="button">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
        <div class="scroll-progress"></div>
    </nav>


    <script>
        
        window.addEventListener('scroll', function() {
            if (window.scrollY > 100) {
                $('.navbar-brand').css({
                    'font-size': '20px',
                    'font-weight': '700',
                    'transform': 'translateX(45vw)'
                });
                $('.list-group').css('transform', 'translateY(56px)');
            } else {
                $('.navbar-brand').css({
                    'font-size': '30px',
                    'font-weight': '500',
                    'transform': 'translateX(0vw)'
                });
                $('.list-group').css('transform', 'translateY(70px)');
            }
            
            console.log(window.scrollY);

            scrollMaxY = document.querySelector('html').scrollHeight - window.innerHeight;

            liveWidth = (window.scrollY / scrollMaxY)*100;
            $('.scroll-progress').css({
                'width': `${liveWidth}%`
            });
        });

    </script>


    <ul class="list-group">
        <li class="list-group-item">An item</li>
        <li class="list-group-item">A second item</li>
        <li class="list-group-item">A third item</li>
        <li class="list-group-item">A fourth item</li>
        <li class="list-group-item">And a fifth one</li>
    </ul>


    <script>

        // 변수 선언
        let isDarkMode = false;

        // 선택자 캐싱
        const $badge = $('.badge').eq(0);
        const $navbar = $('.navbar').eq(0);
        const $modal = $('#modal-window');
        const $listItem = $('.list-group-item');

        // 단일 이벤트 핸들러 등록
        $badge.on('click', function() {
            isDarkMode = !isDarkMode;
            if (isDarkMode) {
                $badge.html('Light 🔄').addClass('bg-light text-dark').removeClass('bg-dark text-light');
                $navbar.removeClass('navbar-light bg-light').addClass('navbar-dark bg-dark');
                $modal.css({ "background": "#555", "color": "white" });
                $listItem.css({'background': 'grey', 'color': 'white'});
            } else {
                $badge.html('Dark 🔄').addClass('bg-dark text-light').removeClass('bg-light text-dark');
                $navbar.removeClass('navbar-dark bg-dark').addClass('navbar-light bg-light');
                $modal.css({ "background": "white", "color": "black" });
                $listItem.css({'background': 'white', 'color': 'black'});
            }
        });

    </script>

    <div class="main-bg">
        <h4>Shirts on Sale</h4>
        <button id="login-btn" class="btn btn-danger">로그인</button>
    </div>

    <script>
        
        $('.navbar-toggler').eq(0).on('click', function() {
            $('.list-group').eq(0).toggleClass('show');
        })

        $('#login-btn').on('click', function() {
            $('#modal').addClass('show-modal');
        })
        
        $('#close').on('click', function() {
            $('#modal').removeClass('show-modal');
        })

    </script>

    <div class="alert alert-danger">
        5초 이내 구매시 사은품 증정!
    </div>

    <script>
        let words = '초 이내 구매시 사은품 증정!';
        let t = 5;

        setInterval(function() {
            if (t > 0) {
                $('.alert').html(t+words);
                --t;
            } else {
                $('.alert').hide();
            }
        }, 1000);

        // function recur(cnt) {
        //     if (cnt > 0) {
        //         $('.alert').html(cnt+words);
        //         setTimeout(function() {
        //             recur(cnt-1)
        //         }, 1000);
        //     } else {
        //         $('.alert').hide();
        //     }
        // }
        // recur(t);

    </script>
    <div style="overflow: hidden">
        <div class="slide-container">
            <div class="slide-box"><img src="img/car1.png"></div>
            <div class="slide-box"><img src="img/car2.png"></div>
            <div class="slide-box"><img src="img/car3.png"></div>
        </div>
    </div>
    <button class="slide-1">1</button>
    <button class="slide-2">2</button>
    <button class="slide-3">3</button>
    <button class="prev-slide">이전</button>
    <button class="next-slide">다음</button>

    <script>
        let current_slide = 1;

        $('.slide-1').eq(0).on('click', function() {
            $('.slide-container').eq(0).css('transform', 'translateX(0vw)');
            current_slide = 1;
        });

        $('.slide-2').eq(0).on('click', function() {
            $('.slide-container').eq(0).css('transform', 'translateX(-100vw)');
            current_slide = 2;
        });

        $('.slide-3').eq(0).on('click', function() {
            $('.slide-container').eq(0).css('transform', 'translateX(-200vw)');
            current_slide = 3;
        });

        $('.prev-slide').eq(0).on('click', function() {
            if (current_slide !== 1) {
                $('.slide-container').eq(0).css({
                    "transform": "translateX("+(200-100*current_slide)+"vw)"
                });
                current_slide -= 1;
            }
        });
        
        $('.next-slide').eq(0).on('click', function() {
            if (current_slide !== 3) {
                $('.slide-container').eq(0).css({
                    "transform": "translateX("+(-100*current_slide)+"vw)"
                });
                current_slide += 1;
            }
        });

    </script>

    <div id="term-box" style="width: 200px; height: 100px; overflow-y: scroll">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. 
        A itaque dolores error maiores animi esse nulla alias 
        dolorum repellat quibusdam. Natus quae, hic possimus 
        reiciendis neque veritatis quas ipsam at! Lorem ipsum 
        olor sit amet, consectetur adipisicing elit. Asperiores, hic?
    </div>

    <script>

        isTARead = false;
        $('#term-box').on('scroll', function() {
            if (!isTARead && 200 < document.querySelector('#term-box').scrollTop) {
                isTARead = true;
                alert('약관 확인 완료');
            }
        });

    </script>

    <div style="height: 1000px"></div>

</body>
</html>